webpackJsonp([10],{hdwK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("TvJ3");var o=a("6vT6"),s=a("gyMJ"),l=a("gmQn"),n=a("mw3O"),c=a.n(n),r={name:"proportion",components:{popupBox:o.a},data:function(){return{search:{size:10,page:1},list:{data:[],totalPage:0,totalCount:0},num:"8000",city:"所有",cityvalue:"",cityAllVal:"",model:"",modelvalue:"",corp:"",corpid:"",prjid:"",prjid_local:"",teamData:[],cityData:[],areaId:[],cityId:[],modelId:[],modelData:[],options:[],projData:[],csvS:[],dataId:"3",isCorpContainAll:!0,popup_show:!1}},created:function(){this.teamData=JSON.parse(localStorage.getItem("cropid")),this.cityData=JSON.parse(localStorage.getItem("city")),this.modelData=JSON.parse(localStorage.getItem("model")),this.options=this.modelData,this.teamData=this.teamData.slice(1),this.corpid=this.teamData[0].id,this.corp=this.teamData[0].memo,this.model=this.modelData[0].id,this.getProportionList()},watch:{model:{handler:function(){this.csvS=[];for(var t=this.modelData.length,i=[],e=0;e<t;e++)"undefined"==this.model?i.push(this.modelData[e]):this.modelData[e].memo.indexOf(this.model)>=0&&i.push(this.modelData[e]);for(e=0;e<i.length;e++){var a={value:"",id:""};a.value=i[e].memo,a.id=i[e].id,this.csvS.push(a)}}}},methods:{change_data:function(t,i){this.list.page=t,this.list.size=i},changeStaff:function(t){var i=this;this.corp=this.teamData.filter(function(t){return t.id===i.corpid})[0].memo,this.getProportionList()},changePrjid:function(){this.getArea()},dialog_batch:function(t){this.popup_show=!0},save:function(){this.popup_show=!1,""!=this.$refs.getDataName.complete()[0]?(this.city=this.$refs.getDataName.complete()[0].join(","),this.cityvalue=this.$refs.getDataName.complete()[1].join(",")):(this.city="所有",this.cityvalue=this.cityAllVal)},submit:function(){var t=this,i={mid:this.model,cid:this.corpid,num:this.num,area:this.cityvalue,prjid:this.prjid};return l.a.request({method:"post",url:"provide",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(t){return t=c.a.stringify(t)}],data:i}).then(function(i){"200"==i.code&&t.$message({type:"success",message:"提交成功"})}).catch(function(t){console.log(t)})},querySearch:function(t,i){i(this.csvS)},handleSelect:function(t){this.modelvalue=t.id},getProportionList:function(){var t=this;this.corp;Object(s.f)(this.corp,"pmemo/cmemo").then(function(i){"200"==i.code&&(t.projData=i.data.list,t.prjid=t.projData[0].id,t.prjid_local=t.projData[0].prjid_local,t.getArea())}).catch(function(t){console.log(t)})},getArea:function(){var t=this;Object(s.b)(this.prjid_local).then(function(i){"200"==i.code&&("ex"!=i.data.area?(t.areaId=i.data.area,t.city="所有",t.cityvalue=i.data.area.join(","),t.cityAllVal=i.data.area.join(","),t.matchCity()):(t.cityvalue="ex",t.cityAllVal="ex",Object(s.c)(),t.cityId=JSON.parse(localStorage.getItem("city"))),""!=i.data.model?(console.log("------prm-----"),t.modelId=i.data.model,t.matchModel(),t.model=t.modelData[0].id):(Object(s.h)(),t.options=JSON.parse(localStorage.getItem("model")),"0"==t.modelData[0].id?t.model=t.modelData[1].id:t.model=t.modelData[0].id))}).catch(function(t){})},matchCity:function(){var t=this;this.cityId=[];for(var i=0;i<this.areaId.length;i++){var e=new Object;e.id=this.cityData.filter(function(e){return e.id===t.areaId[i]})[0].id,e.memo=this.cityData.filter(function(e){return e.id===t.areaId[i]})[0].memo,this.cityId.push(e)}},matchModel:function(){var t=this;this.options=[];var e=new Object;e.id=this.modelData.filter(function(e){return e.id===t.modelId[i]})[0].id,e.memo=this.modelData.filter(function(e){return e.id===t.modelId[i]})[0].memo,this.options.push(e)},dataFilter:function(t){this.model?this.options=this.modelData.filter(function(i){if(~i.memo.indexOf(t))return!0}):this.options=this.modelData}}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"main rule-group"},[e("div",{staticClass:"main-edit"},[t._m(0),t._v(" "),e("div",{staticClass:"edit-box"},[e("div",{staticClass:"box-info"},[e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("外呼团队")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-select",{staticStyle:{width:"220px"},on:{change:function(i){return t.changeStaff()}},model:{value:t.corpid,callback:function(i){t.corpid=i},expression:"corpid"}},[t._l(t.teamData,function(i){return[e("el-option",{key:i.memo,attrs:{label:i.memo,value:i.id}},[t._v(t._s(i.memo))])]})],2)],1)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("外呼项目")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-select",{staticStyle:{width:"220px"},on:{change:t.changePrjid},model:{value:t.prjid,callback:function(i){t.prjid=i},expression:"prjid"}},[t._l(t.projData,function(i){return[e("el-option",{key:i.id,attrs:{label:i.pmemo,value:i.id}},[t._v(t._s(i.pmemo))])]})],2)],1)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("数量")]),t._v(" "),e("span",{staticClass:"item-right"},[[e("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"txt-common",staticStyle:{width:"220px"},attrs:{type:"Number"},domProps:{value:t.num},on:{input:function(i){i.target.composing||(t.num=i.target.value)}}})]],2)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("数据归属地")]),t._v(" "),e("span",{staticClass:"item-right"},[[e("el-input",{staticStyle:{width:"372px"},attrs:{placeholder:"点击选择",readonly:""},nativeOn:{click:function(i){return t.dialog_batch("city")}},model:{value:t.city,callback:function(i){t.city=i},expression:"city"}})]],2)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("模型")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-select",{staticStyle:{width:"372px"},attrs:{placeholder:"请选择",filterable:"","filter-method":t.dataFilter},model:{value:t.model,callback:function(i){t.model=i},expression:"model"}},[t._l(t.options,function(t){return e("el-option",{key:t.id,attrs:{label:t.memo,value:t.id}})})],2)],1)])])]),t._v(" "),e("div",{staticClass:"edit-btn-list"},[e("button",{staticClass:"btn-submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交")])]),t._v(" "),e("el-dialog",{attrs:{visible:t.popup_show},on:{"update:visible":function(i){t.popup_show=i}}},[e("popup-box",{ref:"getDataName",attrs:{dataList:t.cityId,dataId:t.dataId}}),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.popup_show=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"edit-title"},[i("h6",[i("span"),this._v("账号基本信息")])])}]};var m=a("VU/8")(r,d,!1,function(t){a("xkCm")},"data-v-54027a46",null);e.default=m.exports},xkCm:function(t,i){}});
//# sourceMappingURL=10.30343d88b53c8b137a4c.js.map