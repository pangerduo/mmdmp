webpackJsonp([11],{bltl:function(t,i){},hdwK:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});a("TvJ3");var e=a("6vT6"),s=a("gyMJ"),o=a("gmQn"),l=a("mw3O"),n=a.n(l),c={name:"proportion",components:{popupBox:e.a},data:function(){return{search:{size:20,page:1},list:{data:[],totalPage:0,totalCount:0},num:"8000",cityList:[],city:"所有",cityvalue:"",cityAllVal:"",model:"",modelvalue:"",corp:"",corpid:"",prjid:"",projcorp:"",prjid_local:"",teamData:[],cityData:[],areaId:[],cityId:[],modelId:[],modelData:[],options:[],projData:[],csvS:[],dataId:"3",isCorpContainAll:!0,isCityAll:!0,popup_show:!1,radio:"0"}},created:function(){this.teamData=JSON.parse(localStorage.getItem("cropid")),this.cityData=JSON.parse(localStorage.getItem("city")),this.modelData=JSON.parse(localStorage.getItem("model")),this.options=this.modelData,this.teamData=this.teamData.slice(1),this.corpid=this.teamData[0].id,this.corp=this.teamData[0].memo,this.model=this.modelData[0].id,this.cityList[0]=this.cityData[0].memo,this.getProportionList()},watch:{model:{handler:function(){this.csvS=[];for(var t=this.modelData.length,i=[],a=0;a<t;a++)"undefined"==this.model?i.push(this.modelData[a]):this.modelData[a].memo.indexOf(this.model)>=0&&i.push(this.modelData[a]);for(a=0;a<i.length;a++){var e={value:"",id:""};e.value=i[a].memo,e.id=i[a].id,this.csvS.push(e)}}}},methods:{change_data:function(t,i){this.list.page=t,this.list.size=i},changeStaff:function(t){var i=this;"model"==t?(this.corp=this.teamData.filter(function(t){return t.id===i.corpid})[0].memo,this.cityList=[],this.cityList[0]=this.cityData[0].memo,this.isCityAll=!0,this.getProportionList()):"city"==t&&(this.isCityAll?(this.isCityAll=!1,this.cityList.splice(0,1)):(this.isCityAll=this.cityList.some(function(t){return 0===t}),this.isCityAll?this.cityList=[0]:this.cityList.length==this.cityData.length-1&&(this.cityList=[0],this.isCityAll=!0)))},changePrjid:function(){var t=this;this.prjid_local=this.projData.filter(function(i){return i.id==t.prjid})[0].prjid_local,this.cityList=[],this.cityList[0]=this.cityData[0].memo,this.isCityAll=!0,this.getArea()},dialog_batch:function(t){this.popup_show=!0},submit:function(){var t=this,i={mid:this.model,cid:this.corpid,num:this.num,area:this.cityvalue,prjid:this.prjid,stopflag:this.radio};return o.a.request({method:"post",url:"provide/add",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(t){return t=n.a.stringify(t)}],data:i}).then(function(i){"200"==i.code&&t.$message({type:"success",message:"提交成功"})}).catch(function(t){console.log(t)})},getProportionList:function(){var t=this;this.corp;Object(s.h)(this.corpid,"pmemo/cid").then(function(i){"200"==i.code&&(t.projData=i.data.list,t.prjid=t.projData[0].id,t.prjid_local=t.projData[0].prjid_local,t.getArea())}).catch(function(t){console.log(t)})},getArea:function(){var t=this;Object(s.b)(this.prjid_local).then(function(i){"200"==i.code&&("ex"!=i.data.area?(t.areaId=i.data.area,t.city="所有",t.cityvalue=i.data.area.join(","),t.cityAllVal=i.data.area.join(","),t.matchCity()):(t.cityvalue="ex",t.cityAllVal="ex",Object(s.d)(),t.cityId=JSON.parse(localStorage.getItem("city")),console.log(t.cityId)),""!=i.data.model?(t.modelId=i.data.model,t.matchModel(),t.model=t.options[0].id):(Object(s.j)(),t.options=JSON.parse(localStorage.getItem("model")),"0"==t.modelData[0].id?t.model=t.modelData[1].id:t.model=t.modelData[0].id))}).catch(function(t){})},matchCity:function(){var t=this;this.cityId=[];for(var i=0;i<this.areaId.length;i++){var a=new Object;a.id=this.cityData.filter(function(a){return a.id===t.areaId[i]})[0].id,a.memo=this.cityData.filter(function(a){return a.id===t.areaId[i]})[0].memo,this.cityId.push(a)}},matchModel:function(){var t=this;this.options=[];for(var i=0;i<this.modelId.length;i++){var a=new Object;a.id=this.modelData.filter(function(a){return a.id===t.modelId[i]})[0].id,a.memo=this.modelData.filter(function(a){return a.id===t.modelId[i]})[0].memo,this.options.push(a)}},dataFilter:function(t){this.model?this.options=this.modelData.filter(function(i){if(~i.memo.indexOf(t))return!0}):this.options=this.modelData}}},r={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"main rule-group"},[a("div",{staticClass:"main-edit"},[t._m(0),t._v(" "),a("div",{staticClass:"edit-box"},[a("div",{staticClass:"box-info"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"item-left"},[t._v("外呼团队")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{staticStyle:{width:"220px"},on:{change:function(i){return t.changeStaff("model")}},model:{value:t.corpid,callback:function(i){t.corpid=i},expression:"corpid"}},[t._l(t.teamData,function(i){return[a("el-option",{key:i.memo,attrs:{label:i.memo,value:i.id}},[t._v(t._s(i.memo))])]})],2)],1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"item-left"},[t._v("外呼项目")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{staticStyle:{width:"220px"},on:{change:t.changePrjid},model:{value:t.prjid,callback:function(i){t.prjid=i},expression:"prjid"}},[t._l(t.projData,function(i){return[a("el-option",{key:i.id,attrs:{label:i.pmemo,value:i.id}},[t._v(t._s(i.pmemo))])]})],2)],1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"item-left"},[t._v("数量")]),t._v(" "),a("span",{staticClass:"item-right"},[[a("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"txt-common",staticStyle:{width:"220px"},attrs:{type:"Number"},domProps:{value:t.num},on:{input:function(i){i.target.composing||(t.num=i.target.value)}}})]],2)]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"item-left"},[t._v("数据归属地")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{staticStyle:{width:"372px"},attrs:{placeholder:"请选择",filterable:"",multiple:"","collapse-tags":""},on:{change:function(i){return t.changeStaff("city")}},model:{value:t.cityList,callback:function(i){t.cityList=i},expression:"cityList"}},[t._l(t.cityId,function(i,e){return[a("el-option",{key:e,attrs:{label:i.memo,value:i.id}},[t._v(t._s(i.memo))])]})],2)],1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"item-left"},[t._v("模型")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{staticStyle:{width:"372px"},attrs:{placeholder:"请选择",filterable:"","filter-method":t.dataFilter},model:{value:t.model,callback:function(i){t.model=i},expression:"model"}},[t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.memo,value:t.id}})})],2)],1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"item-left font-block"},[t._v("暂停其它")]),t._v(" "),a("span",{staticClass:"item-right"},[a("div",{staticStyle:{width:"450px"}},[a("label",[a("el-radio",{attrs:{label:"0"},model:{value:t.radio,callback:function(i){t.radio=i},expression:"radio"}},[t._v("否")])],1),t._v("     \n                "),a("label",[a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(i){t.radio=i},expression:"radio"}},[t._v("是")])],1)])])])])]),t._v(" "),a("div",{staticClass:"edit-btn-list"},[a("button",{staticClass:"btn-submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交")])])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"edit-title"},[i("h6",[i("span"),this._v("账号基本信息")])])}]};var d=a("VU/8")(c,r,!1,function(t){a("bltl")},"data-v-695947c8",null);i.default=d.exports}});
//# sourceMappingURL=11.7ddeceb4da9e630ea42b.js.map