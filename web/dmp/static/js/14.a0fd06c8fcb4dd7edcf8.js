webpackJsonp([14],{Ylk9:function(t,e){},t3NN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("EuEE"),l=a("TvJ3"),i=a("gmQn"),r=a("mw3O"),n=a.n(r),o={name:"seat",components:{pageTable:l.a},data:function(){return{search:{corp:[],prjid_local:[],beginCalldate:new Date,endCalldate:new Date,orderbyCondition:"calltime",orderbyFlag:!0,size:20,page:1},list:{data:[],totalPage:0,totalCount:0},teamData:[],projData:[],isCorpContainAll:!0,isProjContainAll:!0,endDatePicker:this.processDate()}},created:function(){this.teamData=JSON.parse(localStorage.getItem("cropid")),this.projData=JSON.parse(localStorage.getItem("projid")),this.search.corp[0]=this.teamData[0].id,this.search.prjid_local[0]=this.projData[0].id,this.getInitialList()},methods:{userstatDownload:function(){var t={beginCalldate:Object(s.a)(this.search.beginCalldate,"yyyyMMdd"),endCalldate:Object(s.a)(this.search.endCalldate,"yyyyMMdd"),cid:this.search.corp.join(","),prjid_local:this.search.prjid_local.join(",")};return i.a.request({method:"post",url:"userstat/download",responseType:"arraybuffer",transformRequest:[function(t){return t=n.a.stringify(t)}],data:t}).then(function(t){a("3UNf")(t,"职场展示-坐席功效"+Object(s.a)(new Date,"yyyy-MM-dd hh-mm-ss")+".xlsx")})},dateTimeFormat:function(t){var e=Math.floor(t%3600);return Math.floor(t/3600)+"时"+Math.floor(e/60)+"分"+t%60+"秒"},getSbeginTime:function(t){this.search.beginCalldate=new Date(t)},getSendTime:function(t){this.search.endCalldate=new Date(t)},processDate:function(){var t=this;return{disabledDate:function(e){if(t.search.beginCalldate)return new Date(t.search.beginCalldate).getTime()-864e5>e.getTime()}}},search_data:function(){null!=this.search.beginCalldate?null!=this.search.endCalldate?null!=this.search.beginCalldate&&null!=this.search.endCalldate&&this.search.beginCalldate.getTime()>this.search.endCalldate.getTime()?this.$message({message:"开始日期不能大于结束日期",type:"warning"}):0!=this.search.corp.length?0!=this.search.prjid_local.length?(this.search.page=1,this.getInitialList()):this.$message({message:"请选择品牌",type:"warning"}):this.$message({message:"请选择外呼团队",type:"warning"}):this.$message({message:"请选择结束时间",type:"warning"}):this.$message({message:"请选择开始时间",type:"warning"})},formatDate:function(t){var e=t.datetime.toString();return t.datetime=e.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")},sortChange:function(t){this.search.orderbyCondition=t.prop,"ascending"==t.order?this.search.orderbyFlag=!0:"descending"==t.order&&(this.search.orderbyFlag=""),this.getInitialList()},changeStaff:function(t){"corp"==t?this.isCorpContainAll?(this.isCorpContainAll=!1,this.search.corp.splice(0,1)):(this.isCorpContainAll=this.search.corp.some(function(t){return 0===t}),this.isCorpContainAll?this.search.corp=[0]:this.search.corp.length==this.teamData.length-1&&(this.search.corp=[0],this.isCorpContainAll=!0)):"proj"==t&&(this.isProjContainAll?(this.isProjContainAll=!1,this.search.prjid_local.splice(0,1)):(this.isProjContainAll=this.search.prjid_local.some(function(t){return 0===t}),this.isProjContainAll?this.search.prjid_local=[0]:this.search.prjid_local.length==this.projData.length-1&&(this.search.prjid_local=[0],this.isProjContainAll=!0)))},getInitialList:function(){var t=this,e={beginCalldate:Object(s.a)(this.search.beginCalldate,"yyyyMMdd"),endCalldate:Object(s.a)(this.search.endCalldate,"yyyyMMdd"),cid:this.search.corp.join(","),prjid_local:this.search.prjid_local.join(","),orderbyCondition:this.search.orderbyCondition,orderbyFlag:this.search.orderbyFlag,page:this.search.page,size:this.search.size};return i.a.request({method:"post",url:"userstat",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(t){return t=n.a.stringify(t)}],data:e}).then(function(e){t.list.data=e.data.list,t.list.totalCount=e.data.totalCount,t.list.totalPage=e.data.totalPage}).catch(function(t){console.log(t)})},formatCorp:function(t){for(var e=0;e<this.teamData.length;e++)if(t.cid==this.teamData[e].id)return t.crop=this.teamData[e].memo},formatProj:function(t){var e=this.projData;e=e.slice(1);for(var a=0;a<e.length;a++)if(t.prjid_local==e[a].id)return t.porj=e[a].memo},change_data:function(t,e){this.search.page=t,this.search.size=e,this.getInitialList()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main quality"},[a("div",{staticClass:"main-search"},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[t._v("开始日期")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"开始日期"},on:{change:t.getSbeginTime},model:{value:t.search.beginCalldate,callback:function(e){t.$set(t.search,"beginCalldate",e)},expression:"search.beginCalldate"}})],1)]),t._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[t._v("结束日期")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"结束日期","picker-options":t.endDatePicker},on:{change:t.getSendTime},model:{value:t.search.endCalldate,callback:function(e){t.$set(t.search,"endCalldate",e)},expression:"search.endCalldate"}})],1)]),t._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[t._v("外呼团队")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{attrs:{multiple:"","collapse-tags":""},on:{change:function(e){return t.changeStaff("corp")}},model:{value:t.search.corp,callback:function(e){t.$set(t.search,"corp",e)},expression:"search.corp"}},[t._l(t.teamData,function(e){return[a("el-option",{key:e.id,attrs:{label:e.memo,value:e.id}},[t._v(t._s(e.memo))])]})],2)],1)]),t._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[t._v("品牌")]),t._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{attrs:{multiple:"","collapse-tags":""},on:{change:function(e){return t.changeStaff("proj")}},model:{value:t.search.prjid_local,callback:function(e){t.$set(t.search,"prjid_local",e)},expression:"search.prjid_local"}},[t._l(t.projData,function(e){return[a("el-option",{key:e.id,attrs:{label:e.memo,value:e.id}},[t._v(t._s(e.memo))])]})],2)],1)]),t._v(" "),a("button",{staticClass:"btn-search",attrs:{type:"button"},on:{click:t.search_data}},[t._v("查询")])]),t._v(" "),a("div",{staticClass:"main-table"},[a("div",{staticClass:"table-msg"},[a("div",{staticClass:"msg-left"},[a("p",[t._v("查询符合上述条件的数据"),a("span",[t._v(t._s(t.list.totalCount))]),t._v("条")])]),t._v(" "),a("div",{staticClass:"msg-right"},[a("el-button",{staticClass:"btn-small",attrs:{type:"button"},on:{click:t.userstatDownload}},[t._v("下载报表")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.data,border:""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"datetime",align:"center",label:"时间",formatter:t.formatDate,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cid",align:"center",formatter:t.formatCorp,label:"外呼团队",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prjid_local",align:"center",formatter:t.formatProj,label:"品牌",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uname",align:"center",label:"坐席工号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"umemo",align:"center",label:"坐席姓名",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"firstsignon",align:"center",label:"首通电话开始时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lastsignoff",align:"center",label:"末通电话结束时间",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"connect",align:"center",label:"通话量",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"leads",align:"center",label:"成功数",sortable:"custom",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"worktime",align:"center",label:"工作时间",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"busytimes",align:"center",label:"置忙次数",sortable:"custom",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outwork",align:"center",label:"置闲时间",width:"90"}}),t._v(" "),a("el-table-column",{attrs:{prop:"calltime",align:"center",label:"通话时长",sortable:"custom",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"callRate",align:"center",label:"通话时长占比",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{attrs:{type:"text",size:"small"}},[t._v(t._s(e.row.callRate)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"efficiency",align:"center",label:"工作效率",sortable:"custom",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{attrs:{type:"text",size:"small"}},[t._v(t._s(e.row.efficiency)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"payWorktime",align:"center",label:"结算工作时长",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"busytime",align:"center",label:"置忙时长",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n             "+t._s(t.dateTimeFormat(e.row.busytime))+"\n           ")]}}])})],1),t._v(" "),a("page-table",{attrs:{show_size:"true",cur:t.search.page,total_page:t.list.totalPage,total_count:t.list.totalCount},on:{change:t.change_data}})],1)])},staticRenderFns:[]};var h=a("VU/8")(o,c,!1,function(t){a("Ylk9")},"data-v-41eadb85",null);e.default=h.exports}});
//# sourceMappingURL=14.a0fd06c8fcb4dd7edcf8.js.map