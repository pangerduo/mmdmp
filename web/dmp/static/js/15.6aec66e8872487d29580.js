webpackJsonp([15],{"Fa+Z":function(t,e){},PpiC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("TvJ3"),o=a("gmQn"),n={name:"task",data:function(){return{search:{size:20,page:1},list:{data:[],totalPage:0,totalCount:0,status:""},modelData2:[],teamData:[],projData:[],pmemoData:[]}},components:{pageTable:s.a},created:function(){this.teamData=JSON.parse(localStorage.getItem("brand")),this.projData=JSON.parse(localStorage.getItem("pro")),this.modelData2=JSON.parse(localStorage.getItem("curl")),this.pmemoData=JSON.parse(localStorage.getItem("pmemo")),this.getTask()},methods:{change_data:function(t,e){this.list.page=t,this.list.size=e,this.getTask()},getTask:function(){var t=this,e={page:this.search.page,size:this.search.size};return o.a.request({methods:"get",url:"provide/all",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:e}).then(function(e){t.list.data=e.data.list,t.list.totalCount=e.data.totalCount,t.list.totalPage=e.data.totalPage}).catch(function(t){console.log(t)})},deleteTask:function(t,e){var a=this,s={id:e.id};return o.a.request({method:"post",url:"provide/delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},params:s}).then(function(t){a.$message({type:"success",message:t.message}),a.getTask()}).catch(function(t){console.log(t)})},startTask:function(t,e){var a=this,s={id:e.id,cid:e.cid,prjid:e.prjid};return o.a.request({method:"post",url:"provide/start",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},params:s}).then(function(t){a.$message({type:"success",message:t.message}),a.list.status=1,a.getTask()}).catch(function(t){console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main rule-group"},[a("div",{staticClass:"main-table"},[a("div",{staticClass:"table-msg"},[a("div",{staticClass:"msg-left"},[a("p",[t._v("查询符合上述条件的数据"),a("span",[t._v(t._s(t.list.totalCount))]),t._v("条")])])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.data,border:""}},[a("el-table-column",{attrs:{prop:"cid",align:"center",width:"120",label:"职场"},scopedSlots:t._u([{key:"default",fn:function(e){return[void 0!=t.teamData[e.row.cid]?a("el-button",{staticStyle:{color:"#666666"},attrs:{type:"text"}},[t._v(t._s(t.teamData[e.row.cid]))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"prjid",align:"center",width:"120",label:"项目"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"#666666"},attrs:{type:"text"}},[t._v(t._s(t.pmemoData[e.row.prjid]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"provide_type",align:"center",width:"105",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.provide_type?a("span",[t._v("自动")]):2===e.row.provide_type?a("span",[t._v("手动")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"mid",align:"center",width:"350",label:"模型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{color:"#666666"},attrs:{title:t.modelData2[e.row.mid],type:"text",size:"mini"}},[t._v(t._s(t.modelData2[e.row.mid]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"num",align:"center",width:"120",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dateline",align:"center",width:"166",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",width:"115",label:"阻塞"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.startTask(e.$index,e.row)}}},[t._v("开启")]):1===e.row.status?a("span"):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remain_num",align:"center",width:"115",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.deleteTask(e.$index,e.row)}}},[t._v("删除")]):1===e.row.status?a("span",[t._v("正常")]):t._e()]}}])})],1),t._v(" "),a("page-table",{attrs:{show_size:"true",cur:t.search.page,total_page:t.list.totalPage,total_count:t.list.totalCount},on:{change:t.change_data}})],1)])},staticRenderFns:[]};var r=a("VU/8")(n,l,!1,function(t){a("Fa+Z")},"data-v-2ac5db4e",null);e.default=r.exports}});
//# sourceMappingURL=15.6aec66e8872487d29580.js.map