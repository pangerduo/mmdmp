webpackJsonp([6],{"+TVk":function(e,t){},sckX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("EuEE"),i=a("TvJ3"),s=a("6vT6"),c=a("gmQn"),n=a("mw3O"),o=a.n(n),r={name:"no_single_cause",components:{popupBox:s.a,pageTable:i.a},data:function(){return{search:{beginCalldate:new Date,endCalldate:new Date,beginCallhour:"08",endCallhour:"22",cid:[],prjid_local:[],province:"",provincevalue:"0",city:"",cityvalue:"0",modelname:"",modelvalue:"0",umemo:"",uservalue:"0",groupBy:"datetime,cid,prjid_local,uid,modelname",size:10,page:1},list:{data:[],totalPage:0,totalCount:0},checked:{calldate:!0,callhour:!1,province:!1,city:!1,cid:!0,umemo:!0,prjid_local:!0,modelname:!0},popup_show:!1,isCorpContainAll:!0,isProjContainAll:!0,endDatePicker:this.processDate(),beginDatePicker:this.beginDate(),teamData:[],projData:[],modelData:[],provinceData:[],cityData:[],userData:[],dataType:[],dataId:""}},created:function(){this.teamData=JSON.parse(localStorage.getItem("cropid")),this.projData=JSON.parse(localStorage.getItem("projid")),this.modelData=JSON.parse(localStorage.getItem("model")),this.provinceData=JSON.parse(localStorage.getItem("province")),this.cityData=JSON.parse(localStorage.getItem("city")),this.userData=JSON.parse(localStorage.getItem("uid")),this.search.cid[0]=this.teamData[0].id,this.search.prjid_local[0]=this.projData[0].id,this.getSeatList()},methods:{search_detail:function(){null!=this.search.beginCalldate?null!=this.search.endCalldate?"null"!=this.search.beginCalldate&&"null"!=this.search.endCalldate&&this.search.beginCalldate.getTime()>this.search.endCalldate.getTime()?this.$message({message:"开始日期不能大于结束日期",type:"warning"}):0!=this.search.cid.length?0!=this.search.prjid_local.length?(this.search.page=1,this.getSeatList()):this.$message({message:"请选择品牌",type:"warning"}):this.$message({message:"请选择外呼团队",type:"warning"}):this.$message({message:"请选择结束时间",type:"warning"}):this.$message({message:"请选择开始时间",type:"warning"})},getSbeginTime:function(e){this.search.beginCalldate=new Date(e)},getSendTime:function(e){this.search.endCalldate=new Date(e)},beginDate:function(){var e=this;return{disabledDate:function(t){e.search.endCalldate}}},processDate:function(){var e=this;return{disabledDate:function(t){return e.search.beginCalldate?new Date(e.search.beginCalldate).getTime()>=t.getTime():t.getTime()>Date.now()}}},formatDate:function(e){if(e.datetime){var t=e.datetime.toString();return e.datetime=t.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")}},changeStaff:function(e){"corp"==e?this.isCorpContainAll?(this.isCorpContainAll=!1,this.search.cid.splice(0,1)):(this.isCorpContainAll=this.search.cid.some(function(e){return 0===e}),this.isCorpContainAll?this.search.cid=[0]:this.search.cid.length==this.teamData.length-1&&(this.search.cid=[0],this.isCorpContainAll=!0)):"proj"==e&&(this.isProjContainAll?(this.isProjContainAll=!1,this.search.prjid_local.splice(0,1)):(this.isProjContainAll=this.search.prjid_local.some(function(e){return 0===e}),this.isProjContainAll?this.search.prjid_local=[0]:this.search.prjid_local.length==this.projData.length-1&&(this.search.prjid_local=[0],this.isProjContainAll=!0)))},getSeatList:function(){var e=this,t={};return t.beginCalldate=Object(l.a)(this.search.beginCalldate,"yyyyMMdd"),t.endCalldate=Object(l.a)(this.search.endCalldate,"yyyyMMdd"),t.beginCallhour=this.search.beginCallhour,t.endCallhour=this.search.endCallhour,t.groupBy=this.search.groupBy,t.page=this.search.page,t.size=this.search.size,t.province=this.search.provincevalue,t.city=this.search.cityvalue,t.cid=this.search.cid.join(","),t.prjid_local=this.search.prjid_local.join(","),t.uid=this.search.uservalue,t.modelname=this.search.modelvalue,c.a.request({method:"post",url:"reason ",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(e){return e=o.a.stringify(e)}],data:t}).then(function(t){e.list.data=t.data.list,e.list.totalCount=t.data.totalCount,e.list.totalPage=t.data.totalPage}).catch(function(e){console.log(e)})},dialog_batch:function(e){"modelname"==e?(this.dataType=this.modelData,this.dataId="1"):"province"==e?(this.dataType=this.provinceData,this.dataId="2"):"city"==e?(this.dataType=this.cityData,this.dataId="3"):"user"==e&&(this.dataType=this.userData,this.dataId="4"),this.popup_show=!0},save:function(){this.popup_show=!1,"1"==this.dataId?""!=this.$refs.getDataName.complete()[0]?(this.search.modelname=this.$refs.getDataName.complete()[0].join(","),this.search.modelvalue=this.$refs.getDataName.complete()[1].join(",")):(this.search.modelname="",this.search.modelvalue="0"):"2"==this.dataId?""!=this.$refs.getDataName.complete()[0]?(this.search.province=this.$refs.getDataName.complete()[0].join(","),this.search.provincevalue=this.$refs.getDataName.complete()[1].join(",")):(this.search.province="",this.search.provincevalue="0"):"3"==this.dataId?""!=this.$refs.getDataName.complete()[0]?(this.search.city=this.$refs.getDataName.complete()[0].join(","),this.search.cityvalue=this.$refs.getDataName.complete()[1].join(",")):(this.search.city="",this.search.cityvalue="0"):"4"==this.dataId&&(""!=this.$refs.getDataName.complete()[0]?(this.search.umemo=this.$refs.getDataName.complete()[0].join(","),this.search.uservalue=this.$refs.getDataName.complete()[1].join(",")):(this.search.umemo="",this.search.uservalue="0"))},checkedChange:function(e,t){var a=this.search.groupBy.split(",");if(t){for(var l=[e],i=0;i<a.length;i++)-1==l.indexOf(a[i])&&l.push(a[i]);this.search.groupBy=l.join(",")}else{var s=a.indexOf(e);if(a.splice(s,1),0==a.length)this.search.groupBy="true";else{this.search.groupBy=a.join(",");this.search.groupBy=this.search.groupBy.replace(/,$/g,"")}}this.getSeatList()},formatCorp:function(e){for(var t=0;t<this.teamData.length;t++)if(e.cid==this.teamData[t].id)return e.crop=this.teamData[t].memo},formatProj:function(e){var t=this.projData;t=t.slice(1);for(var a=0;a<t.length;a++)if(e.prjid_local==t[a].id)return e.porj=t[a].memo},formatModel:function(e){for(var t=0;t<this.modelData.length;t++)if(e.modelname==this.modelData[t].id)return e.modelName=this.modelData[t].memo},formatUser:function(e){for(var t=0;t<this.userData.length;t++)if(e.uid==this.userData[t].id)return e.user=this.userData[t].memo},formatProvince:function(e){for(var t=0;t<this.provinceData.length;t++)if(e.province==this.provinceData[t].id)return e.provincename=this.provinceData[t].memo},formatCity:function(e){for(var t=0;t<this.cityData.length;t++)if(e.city==this.cityData[t].id)return e.cityname=this.cityData[t].memo},change_data:function(e,t){this.search.page=e,this.search.size=t,this.getSeatList()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main quality"},[a("div",{staticClass:"main-search"},[a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("开始日期")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":e.beginDatePicker,placeholder:"选择日期"},on:{change:e.getSbeginTime},model:{value:e.search.beginCalldate,callback:function(t){e.$set(e.search,"beginCalldate",t)},expression:"search.beginCalldate"}})],1)]),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("结束日期")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.endDatePicker},on:{change:e.getSendTime},model:{value:e.search.endCalldate,callback:function(t){e.$set(e.search,"endCalldate",t)},expression:"search.endCalldate"}})],1)]),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("开始时段")]),e._v(" "),a("el-select",{model:{value:e.search.beginCallhour,callback:function(t){e.$set(e.search,"beginCallhour",t)},expression:"search.beginCallhour"}},[a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"08",value:""}},[e._v("08")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"09",value:"09"}},[e._v("09")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"10",value:"10"}},[e._v("10")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"11",value:"11"}},[e._v("11")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"12",value:"12"}},[e._v("12")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"13",value:"13"}},[e._v("13")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"14",value:"14"}},[e._v("14")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"15",value:"15"}},[e._v("15")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"16",value:"16"}},[e._v("16")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"17",value:"17"}},[e._v("17")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"18",value:"18"}},[e._v("18")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"19",value:"19"}},[e._v("19")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"20",value:"20"}},[e._v("20")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"21",value:"21"}},[e._v("21")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"22",value:"22"}},[e._v("22")])],1)],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("结束时段")]),e._v(" "),a("el-select",{model:{value:e.search.endCallhour,callback:function(t){e.$set(e.search,"endCallhour",t)},expression:"search.endCallhour"}},[a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"08",value:""}},[e._v("08")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"09",value:"09"}},[e._v("09")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"10",value:"10"}},[e._v("10")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"11",value:"11"}},[e._v("11")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"12",value:"12"}},[e._v("12")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"13",value:"13"}},[e._v("13")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"14",value:"14"}},[e._v("14")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"15",value:"15"}},[e._v("15")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"16",value:"16"}},[e._v("16")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"17",value:"17"}},[e._v("17")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"18",value:"18"}},[e._v("18")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"19",value:"19"}},[e._v("19")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"20",value:"20"}},[e._v("20")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"21",value:"21"}},[e._v("21")]),e._v(" "),a("el-option",{staticStyle:{"padding-left":"15px"},attrs:{label:"22",value:"22"}},[e._v("22")])],1)],1),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("外呼团队")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{attrs:{multiple:"","collapse-tags":""},on:{change:function(t){return e.changeStaff("corp")}},model:{value:e.search.cid,callback:function(t){e.$set(e.search,"cid",t)},expression:"search.cid"}},[e._l(e.teamData,function(t){return[a("el-option",{key:t.id,attrs:{label:t.memo,value:t.id}},[e._v(e._s(t.memo))])]})],2)],1)]),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("品牌")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-select",{attrs:{multiple:"","collapse-tags":""},on:{change:function(t){return e.changeStaff("proj")}},model:{value:e.search.prjid_local,callback:function(t){e.$set(e.search,"prjid_local",t)},expression:"search.prjid_local"}},[e._l(e.projData,function(t){return[a("el-option",{key:t.id,attrs:{label:t.memo,value:t.id}},[e._v(e._s(t.memo))])]})],2)],1)]),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("省份")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-input",{attrs:{placeholder:"点击选择"},nativeOn:{click:function(t){return e.dialog_batch("province")}},model:{value:e.search.province,callback:function(t){e.$set(e.search,"province",t)},expression:"search.province"}})],1)]),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("城市")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-input",{attrs:{placeholder:"点击选择"},nativeOn:{click:function(t){return e.dialog_batch("city")}},model:{value:e.search.city,callback:function(t){e.$set(e.search,"city",t)},expression:"search.city"}})],1)]),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("数据批次")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-input",{staticStyle:{cursor:"pointer"},attrs:{placeholder:"点击选择",readonly:""},nativeOn:{click:function(t){return e.dialog_batch("modelname")}},model:{value:e.search.modelname,callback:function(t){e.$set(e.search,"modelname",t)},expression:"search.modelname"}})],1)]),e._v(" "),a("div",{staticClass:"search-item"},[a("span",{staticClass:"item-left"},[e._v("坐席姓名")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-input",{attrs:{placeholder:"点击选择"},nativeOn:{click:function(t){return e.dialog_batch("user")}},model:{value:e.search.umemo,callback:function(t){e.$set(e.search,"umemo",t)},expression:"search.umemo"}})],1)]),e._v(" "),a("div",{staticClass:"search-item",staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"item-left"},[e._v("分组条件")]),e._v(" "),a("span",{staticClass:"item-right"},[a("el-checkbox",{attrs:{label:"日期",name:"test"},on:{change:function(t){return e.checkedChange("datetime",e.checked.calldate)}},model:{value:e.checked.calldate,callback:function(t){e.$set(e.checked,"calldate",t)},expression:"checked.calldate"}}),e._v(" "),a("el-checkbox",{attrs:{label:"时段",name:"test"},on:{change:function(t){return e.checkedChange("datehour",e.checked.callhour)}},model:{value:e.checked.callhour,callback:function(t){e.$set(e.checked,"callhour",t)},expression:"checked.callhour"}}),e._v(" "),a("el-checkbox",{attrs:{label:"省份",name:"test"},on:{change:function(t){return e.checkedChange("province",e.checked.province)}},model:{value:e.checked.province,callback:function(t){e.$set(e.checked,"province",t)},expression:"checked.province"}}),e._v(" "),a("el-checkbox",{attrs:{label:"城市",name:"test"},on:{change:function(t){return e.checkedChange("city",e.checked.city)}},model:{value:e.checked.city,callback:function(t){e.$set(e.checked,"city",t)},expression:"checked.city"}}),e._v(" "),a("el-checkbox",{attrs:{label:"外呼团队",name:"test"},on:{change:function(t){return e.checkedChange("cid",e.checked.cid)}},model:{value:e.checked.cid,callback:function(t){e.$set(e.checked,"cid",t)},expression:"checked.cid"}}),e._v(" "),a("el-checkbox",{attrs:{label:"坐席",name:"test"},on:{change:function(t){return e.checkedChange("uid",e.checked.umemo)}},model:{value:e.checked.umemo,callback:function(t){e.$set(e.checked,"umemo",t)},expression:"checked.umemo"}}),e._v(" "),a("el-checkbox",{attrs:{label:"品牌",name:"test"},on:{change:function(t){return e.checkedChange("prjid_local",e.checked.prjid_local)}},model:{value:e.checked.prjid_local,callback:function(t){e.$set(e.checked,"prjid_local",t)},expression:"checked.prjid_local"}}),e._v(" "),a("el-checkbox",{attrs:{label:"数据批次",name:"test"},on:{change:function(t){return e.checkedChange("modelname",e.checked.modelname)}},model:{value:e.checked.modelname,callback:function(t){e.$set(e.checked,"modelname",t)},expression:"checked.modelname"}})],1)]),e._v(" "),a("button",{staticClass:"btn-search",attrs:{type:"button"},on:{click:e.search_detail}},[e._v("查询")])]),e._v(" "),a("div",{staticClass:"main-table"},[a("div",{staticClass:"table-msg"},[a("div",{staticClass:"msg-left"},[a("p",[e._v("查询符合上述条件的数据"),a("span",[e._v(e._s(e.list.totalCount))]),e._v("条")])])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list.data,border:"","default-sort":{prop:"date",order:"descending"}}},[e.checked.calldate?a("el-table-column",{attrs:{prop:"datetime",align:"center",formatter:e.formatDate,label:"日期",width:"100"}}):e._e(),e._v(" "),e.checked.callhour?a("el-table-column",{attrs:{prop:"datehour",align:"center",label:"时段"}}):e._e(),e._v(" "),e.checked.cid?a("el-table-column",{attrs:{prop:"cid",align:"center",label:"外呼团队",formatter:e.formatCorp}}):e._e(),e._v(" "),e.checked.umemo?a("el-table-column",{attrs:{prop:"user",align:"center",formatter:e.formatUser,label:"坐席"}}):e._e(),e._v(" "),e.checked.prjid_local?a("el-table-column",{attrs:{prop:"porj",align:"center",formatter:e.formatProj,label:"品牌"}}):e._e(),e._v(" "),e.checked.modelname?a("el-table-column",{attrs:{prop:"modelName",formatter:e.formatModel,align:"center",label:"数据批次"}}):e._e(),e._v(" "),e.checked.province?a("el-table-column",{attrs:{prop:"province",align:"center",formatter:e.formatProvince,label:"省份"}}):e._e(),e._v(" "),e.checked.city?a("el-table-column",{attrs:{prop:"city",align:"center",formatter:e.formatCity,label:"城市"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"refusereason",align:"center",label:"不成单原因"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",align:"center",label:"占比"}}),e._v("\\\n    ")],1),e._v(" "),a("page-table",{attrs:{show_size:"true",cur:e.search.page,total_page:e.list.totalPage,total_count:e.list.totalCount},on:{change:e.change_data}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.popup_show},on:{"update:visible":function(t){e.popup_show=t}}},[a("popup-box",{ref:"getDataName",attrs:{dataList:e.dataType,dataId:e.dataId}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.popup_show=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,h,!1,function(e){a("+TVk")},"data-v-ec46b134",null);t.default=d.exports}});
//# sourceMappingURL=6.d21c24329ee4016309f0.js.map