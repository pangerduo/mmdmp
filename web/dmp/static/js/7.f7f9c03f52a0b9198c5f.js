webpackJsonp([7],{"ijf+":function(t,a){},t3NN:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("EuEE"),i=e("TvJ3"),s=e("gmQn"),r=e("mw3O"),n=e.n(r),o={name:"seat",components:{pageTable:i.a},data:function(){return{search:{corp:[],prjid_local:[],beginCalldate:new Date,endCalldate:new Date,orderbyCondition:"calltime",orderbyFlag:!1,size:10,page:1},list:{data:[],totalPage:0,totalCount:0},teamData:[],projData:[],isCorpContainAll:!0,isProjContainAll:!0}},created:function(){this.teamData=JSON.parse(localStorage.getItem("cropid")),this.projData=JSON.parse(localStorage.getItem("projid")),this.search.corp[0]=this.teamData[0].id,this.search.prjid_local[0]=this.projData[0].id,this.getInitialList()},methods:{getSbeginTime:function(t){this.beginCalldate=new Date(t)},getSendTime:function(t){this.endCalldate=new Date(t)},search_data:function(){0!=this.search.corp.length?0!=this.search.prjid_local.length?(this.search.page=1,this.getInitialList()):this.$message({message:"请选择品牌",type:"warning"}):this.$message({message:"请选择外呼团队",type:"warning"})},formatDate:function(t){var a=t.datetime.toString();return t.datetime=a.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1-$2-$3")},changeStaff:function(t){"corp"==t?this.isCorpContainAll?(this.isCorpContainAll=!1,this.search.corp.splice(0,1)):(this.isCorpContainAll=this.search.corp.some(function(t){return 0===t}),this.isCorpContainAll?this.search.corp=[0]:this.search.corp.length==this.teamData.length-1&&(this.search.corp=[0],this.isCorpContainAll=!0)):"proj"==t&&(this.isProjContainAll?(this.isProjContainAll=!1,this.search.prjid_local.splice(0,1)):(this.isProjContainAll=this.search.prjid_local.some(function(t){return 0===t}),this.isProjContainAll?this.search.prjid_local=[0]:this.search.prjid_local.length==this.projData.length-1&&(this.search.prjid_local=[0],this.isProjContainAll=!0)))},getInitialList:function(){var t=this,a={beginCalldate:Object(l.a)(this.search.beginCalldate,"yyyyMMdd"),endCalldate:Object(l.a)(this.search.endCalldate,"yyyyMMdd"),cid:this.search.corp.join(","),prjid_local:this.search.prjid_local.join(","),orderbyCondition:this.search.orderbyCondition,orderbyFlag:this.search.orderbyFlag,page:this.search.page,size:this.search.size};return s.a.request({method:"post",url:"userstat",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(t){return t=n.a.stringify(t)}],data:a}).then(function(a){t.list.data=a.data.list,t.list.totalCount=a.data.totalCount,t.list.totalPage=a.data.totalPage}).catch(function(t){console.log(t)})},formatCorp:function(t){for(var a=0;a<this.teamData.length;a++)if(t.cid==this.teamData[a].id)return t.crop=this.teamData[a].memo},formatProj:function(t){var a=this.projData;a=a.slice(1);for(var e=0;e<a.length;e++)if(t.prjid_local==a[e].id)return t.porj=a[e].memo},change_data:function(t,a){this.search.page=t,this.search.size=a,this.getInitialList()}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main quality"},[e("div",{staticClass:"main-search"},[e("div",{staticClass:"search-item"},[e("span",{staticClass:"item-left"},[t._v("开始日期")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"开始日期"},on:{change:t.getSbeginTime},model:{value:t.search.beginCalldate,callback:function(a){t.$set(t.search,"beginCalldate",a)},expression:"search.beginCalldate"}})],1)]),t._v(" "),e("div",{staticClass:"search-item"},[e("span",{staticClass:"item-left"},[t._v("结束日期")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"结束日期"},on:{change:t.getSendTime},model:{value:t.search.endCalldate,callback:function(a){t.$set(t.search,"endCalldate",a)},expression:"search.endCalldate"}})],1)]),t._v(" "),e("div",{staticClass:"search-item"},[e("span",{staticClass:"item-left"},[t._v("外呼团队")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-select",{attrs:{multiple:"","collapse-tags":""},on:{change:function(a){return t.changeStaff("corp")}},model:{value:t.search.corp,callback:function(a){t.$set(t.search,"corp",a)},expression:"search.corp"}},[t._l(t.teamData,function(a){return[e("el-option",{key:a.id,attrs:{label:a.memo,value:a.id}},[t._v(t._s(a.memo))])]})],2)],1)]),t._v(" "),e("div",{staticClass:"search-item"},[e("span",{staticClass:"item-left"},[t._v("品牌")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-select",{attrs:{multiple:"","collapse-tags":""},on:{change:function(a){return t.changeStaff("proj")}},model:{value:t.search.prjid_local,callback:function(a){t.$set(t.search,"prjid_local",a)},expression:"search.prjid_local"}},[t._l(t.projData,function(a){return[e("el-option",{key:a.id,attrs:{label:a.memo,value:a.id}},[t._v(t._s(a.memo))])]})],2)],1)]),t._v(" "),e("button",{staticClass:"btn-search",attrs:{type:"button"},on:{click:t.search_data}},[t._v("查询")])]),t._v(" "),e("div",{staticClass:"main-table"},[e("div",{staticClass:"table-msg"},[e("div",{staticClass:"msg-left"},[e("p",[t._v("查询符合上述条件的数据"),e("span",[t._v(t._s(t.list.totalCount))]),t._v("条")])])]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.data,border:""}},[e("el-table-column",{attrs:{prop:"datetime",align:"center",label:"时间",formatter:t.formatDate,width:"100"}}),t._v(" "),e("el-table-column",{attrs:{prop:"cid",align:"center",formatter:t.formatCorp,label:"外呼团队",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"prjid_local",align:"center",formatter:t.formatProj,label:"品牌",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"uname",align:"center",label:"坐席工号",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"umemo",align:"center",label:"坐席姓名",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"firstsignon",align:"center",label:"首通电话开始时间",width:"100"}}),t._v(" "),e("el-table-column",{attrs:{prop:"lastsignoff",align:"center",label:"末通电话结束时间",width:"100"}}),t._v(" "),e("el-table-column",{attrs:{prop:"connect",align:"center",label:"通话量",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"leads",align:"center",label:"成功数",sortable:"",width:"100"}}),t._v(" "),e("el-table-column",{attrs:{prop:"worktime",align:"center",label:"工作时间",width:"90"}}),t._v(" "),e("el-table-column",{attrs:{prop:"busytimes",align:"center",label:"置忙时间",sortable:"",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"outwork",align:"center",label:"置闲时间",width:"90"}}),t._v(" "),e("el-table-column",{attrs:{prop:"calltime",align:"center",label:"通话时长",sortable:"",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"callRate",align:"center",label:"通话时长占比",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",{attrs:{type:"text",size:"small"}},[t._v(t._s(a.row.callRate)+"%")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"efficiency",align:"center",label:"工作效率",sortable:"",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("p",{attrs:{type:"text",size:"small"}},[t._v(t._s(a.row.efficiency)+"%")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"payWorktime",align:"center",label:"结算工作时长",width:"130"}})],1),t._v(" "),e("page-table",{attrs:{show_size:"true",cur:t.search.page,total_page:t.list.totalPage,total_count:t.list.totalCount},on:{change:t.change_data}})],1)])},staticRenderFns:[]};var h=e("VU/8")(o,c,!1,function(t){e("ijf+")},"data-v-9039088e",null);a.default=h.exports}});
//# sourceMappingURL=7.f7f9c03f52a0b9198c5f.js.map