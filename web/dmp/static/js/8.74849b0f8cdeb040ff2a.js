webpackJsonp([8],{"60zi":function(t,a){},hdwK:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("TvJ3");var i=e("6vT6"),o=e("gyMJ"),s=e("gmQn"),l=e("mw3O"),n=e.n(l),c={name:"proportion",components:{popupBox:i.a},data:function(){return{search:{size:10,page:1},list:{data:[],totalPage:0,totalCount:0},num:"8000",city:"所有",cityvalue:"",cityAllVal:"",model:"",modelvalue:"",corp:"",corpid:"",prjid:"",prjid_local:"",teamData:[],cityData:[],areaId:[],cityId:[],modelData:[],options:[],projData:[],csvS:[],dataId:"3",isCorpContainAll:!0,popup_show:!1}},created:function(){this.teamData=JSON.parse(localStorage.getItem("cropid")),this.cityData=JSON.parse(localStorage.getItem("city")),this.modelData=JSON.parse(localStorage.getItem("model")),this.options=this.modelData,this.teamData=this.teamData.slice(1),this.corpid=this.teamData[0].id,this.corp=this.teamData[0].memo,this.model=this.modelData[0].id,this.getProportionList()},watch:{model:{handler:function(){this.csvS=[];for(var t=this.modelData.length,a=[],e=0;e<t;e++)""==this.model?a.push(this.modelData[e]):this.modelData[e].memo.indexOf(this.model)>=0&&a.push(this.modelData[e]);for(e=0;e<a.length;e++){var i={value:"",id:""};i.value=a[e].memo,i.id=a[e].id,this.csvS.push(i)}}}},methods:{change_data:function(t,a){this.list.page=t,this.list.size=a},changeStaff:function(t){var a=this;this.corp=this.teamData.filter(function(t){return t.id===a.corpid})[0].memo,this.getProportionList()},changePrjid:function(){this.getArea()},dialog_batch:function(t){this.popup_show=!0},save:function(){this.popup_show=!1,console.log(this.$refs.getDataName.complete()[0]),""!=this.$refs.getDataName.complete()[0]?(console.log("22222"),this.city=this.$refs.getDataName.complete()[0].join(","),this.cityvalue=this.$refs.getDataName.complete()[1].join(",")):(this.city="所有",this.cityvalue=this.cityAllVal)},submit:function(){var t=this,a={mid:this.model,cid:this.corpid,num:this.num,area:this.cityvalue,prjid:this.prjid};return s.a.request({method:"post",url:"provide",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(t){return t=n.a.stringify(t)}],data:a}).then(function(a){"200"==a.code&&t.$message({type:"success",message:"提交成功"})}).catch(function(t){console.log(t)})},querySearch:function(t,a){a(this.csvS)},handleSelect:function(t){this.modelvalue=t.id},getProportionList:function(){var t=this;this.corp;Object(o.e)(this.corp,"pmemo/cmemo").then(function(a){"200"==a.code&&(t.projData=a.data.list,t.prjid=t.projData[0].id,t.prjid_local=t.projData[0].prjid_local,t.getArea())}).catch(function(t){console.log(t)})},getArea:function(){var t=this;Object(o.b)(this.prjid_local).then(function(a){"200"==a.code&&("ex"!=a.data.area?(t.areaId=a.data.area,t.city="所有",t.cityvalue=a.data.area.join(","),t.cityAllVal=a.data.area.join(","),t.matchCity()):(t.cityvalue="ex",t.cityAllVal="ex",Object(o.c)(),t.cityId=JSON.parse(localStorage.getItem("city"))),""!=a.data.model?(console.log(t.modelData),t.modelData=a.data.model,t.model=t.modelData[0].id):(Object(o.g)(),t.modelData=JSON.parse(localStorage.getItem("model")),t.model=t.modelData[0].id))}).catch(function(t){})},matchCity:function(){var t=this;this.cityId=[];for(var a=0;a<this.areaId.length;a++){var e=new Object;e.id=this.cityData.filter(function(e){return e.id===t.areaId[a]})[0].id,e.memo=this.cityData.filter(function(e){return e.id===t.areaId[a]})[0].memo,this.cityId.push(e)}},dataFilter:function(t){this.model?this.options=this.modelData.filter(function(a){if(~a.memo.indexOf(t))return!0}):this.options=this.modelData}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main rule-group"},[e("div",{staticClass:"main-edit"},[t._m(0),t._v(" "),e("div",{staticClass:"edit-box"},[e("div",{staticClass:"box-info"},[e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("外呼团队")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-select",{staticStyle:{width:"220px"},on:{change:function(a){return t.changeStaff()}},model:{value:t.corpid,callback:function(a){t.corpid=a},expression:"corpid"}},[t._l(t.teamData,function(a){return[e("el-option",{key:a.memo,attrs:{label:a.memo,value:a.id}},[t._v(t._s(a.memo))])]})],2)],1)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("外呼项目")]),t._v(" "),e("span",{staticClass:"item-right"},[e("el-select",{staticStyle:{width:"220px"},on:{change:t.changePrjid},model:{value:t.prjid,callback:function(a){t.prjid=a},expression:"prjid"}},[t._l(t.projData,function(a){return[e("el-option",{key:a.id,attrs:{label:a.pmemo,value:a.id}},[t._v(t._s(a.pmemo))])]})],2)],1)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("数量")]),t._v(" "),e("span",{staticClass:"item-right"},[[e("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"txt-common",staticStyle:{width:"220px"},attrs:{type:"Number"},domProps:{value:t.num},on:{input:function(a){a.target.composing||(t.num=a.target.value)}}})]],2)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("数据归属地")]),t._v(" "),e("span",{staticClass:"item-right"},[[e("el-input",{staticStyle:{width:"372px"},attrs:{placeholder:"点击选择",readonly:""},nativeOn:{click:function(a){return t.dialog_batch("city")}},model:{value:t.city,callback:function(a){t.city=a},expression:"city"}})]],2)]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-left"},[t._v("模型")]),t._v(" "),e("span",{staticClass:"item-right"},[[e("el-select",{staticStyle:{width:"372px"},attrs:{placeholder:"请选择",filterable:"","filter-method":t.dataFilter},model:{value:t.model,callback:function(a){t.model=a},expression:"model"}},t._l(t.options,function(t){return e("el-option",{key:t.id,attrs:{label:t.memo,value:t.id}})}),1)]],2)])])]),t._v(" "),e("div",{staticClass:"edit-btn-list"},[e("button",{staticClass:"btn-submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交")])]),t._v(" "),e("el-dialog",{attrs:{visible:t.popup_show},on:{"update:visible":function(a){t.popup_show=a}}},[e("popup-box",{ref:"getDataName",attrs:{dataList:t.cityId,dataId:t.dataId}}),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.popup_show=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"edit-title"},[a("h6",[a("span"),this._v("账号基本信息")])])}]};var d=e("VU/8")(c,r,!1,function(t){e("60zi")},"data-v-cee16cbc",null);a.default=d.exports}});
//# sourceMappingURL=8.74849b0f8cdeb040ff2a.js.map