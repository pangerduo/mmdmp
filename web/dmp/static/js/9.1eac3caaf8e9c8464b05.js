webpackJsonp([9],{OmeH:function(t,e){},hdwK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("TvJ3");var a=i("6vT6"),o=i("gyMJ"),s=i("gmQn"),l=i("mw3O"),n=i.n(l),c={name:"proportion",components:{popupBox:a.a},data:function(){return{search:{size:10,page:1},list:{data:[],totalPage:0,totalCount:0},num:"8000",city:"所有",cityvalue:"",cityAllVal:"",model:"",modelvalue:"",corp:"",corpid:"",prjid:"",prjid_local:"",teamData:[],cityData:[],areaId:[],cityId:[],modelId:[],modelData:[],options:[],projData:[],csvS:[],dataId:"3",isCorpContainAll:!0,popup_show:!1}},created:function(){this.teamData=JSON.parse(localStorage.getItem("cropid")),this.cityData=JSON.parse(localStorage.getItem("city")),this.modelData=JSON.parse(localStorage.getItem("model")),this.options=this.modelData,this.teamData=this.teamData.slice(1),this.corpid=this.teamData[0].id,this.corp=this.teamData[0].memo,this.model=this.modelData[0].id,this.getProportionList()},watch:{model:{handler:function(){this.csvS=[];for(var t=this.modelData.length,e=[],i=0;i<t;i++)"undefined"==this.model?e.push(this.modelData[i]):this.modelData[i].memo.indexOf(this.model)>=0&&e.push(this.modelData[i]);for(i=0;i<e.length;i++){var a={value:"",id:""};a.value=e[i].memo,a.id=e[i].id,this.csvS.push(a)}}}},methods:{change_data:function(t,e){this.list.page=t,this.list.size=e},changeStaff:function(t){var e=this;this.corp=this.teamData.filter(function(t){return t.id===e.corpid})[0].memo,this.getProportionList()},changePrjid:function(){this.getArea()},dialog_batch:function(t){this.popup_show=!0},save:function(){this.popup_show=!1,""!=this.$refs.getDataName.complete()[0]?(this.city=this.$refs.getDataName.complete()[0].join(","),this.cityvalue=this.$refs.getDataName.complete()[1].join(",")):(this.city="所有",this.cityvalue=this.cityAllVal)},submit:function(){var t=this,e={mid:this.model,cid:this.corpid,num:this.num,area:this.cityvalue,prjid:this.prjid};return s.a.request({method:"post",url:"provide",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(t){return t=n.a.stringify(t)}],data:e}).then(function(e){"200"==e.code&&t.$message({type:"success",message:"提交成功"})}).catch(function(t){console.log(t)})},querySearch:function(t,e){e(this.csvS)},handleSelect:function(t){this.modelvalue=t.id},getProportionList:function(){var t=this;this.corp;Object(o.h)(this.corp,"pmemo/cmemo").then(function(e){"200"==e.code&&(t.projData=e.data.list,t.prjid=t.projData[0].id,t.prjid_local=t.projData[0].prjid_local,t.getArea())}).catch(function(t){console.log(t)})},getArea:function(){var t=this;Object(o.b)(this.prjid_local).then(function(e){"200"==e.code&&("ex"!=e.data.area?(t.areaId=e.data.area,t.city="所有",t.cityvalue=e.data.area.join(","),t.cityAllVal=e.data.area.join(","),t.matchCity()):(t.cityvalue="ex",t.cityAllVal="ex",Object(o.d)(),t.cityId=JSON.parse(localStorage.getItem("city"))),""!=e.data.model?(console.log("------prm--111111---"),t.modelId=e.data.model,t.matchModel(),t.model=t.options[0].id):(Object(o.j)(),t.options=JSON.parse(localStorage.getItem("model")),"0"==t.modelData[0].id?t.model=t.modelData[1].id:t.model=t.modelData[0].id))}).catch(function(t){})},matchCity:function(){var t=this;this.cityId=[];for(var e=0;e<this.areaId.length;e++){var i=new Object;i.id=this.cityData.filter(function(i){return i.id===t.areaId[e]})[0].id,i.memo=this.cityData.filter(function(i){return i.id===t.areaId[e]})[0].memo,this.cityId.push(i)}},matchModel:function(){var t=this;this.options=[];for(var e=0;e<this.modelId.length;e++){var i=new Object;i.id=this.modelData.filter(function(i){return i.id===t.modelId[e]})[0].id,i.memo=this.modelData.filter(function(i){return i.id===t.modelId[e]})[0].memo,this.options.push(i)}},dataFilter:function(t){this.model?this.options=this.modelData.filter(function(e){if(~e.memo.indexOf(t))return!0}):this.options=this.modelData}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main rule-group"},[i("div",{staticClass:"main-edit"},[t._m(0),t._v(" "),i("div",{staticClass:"edit-box"},[i("div",{staticClass:"box-info"},[i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-left"},[t._v("外呼团队")]),t._v(" "),i("span",{staticClass:"item-right"},[i("el-select",{staticStyle:{width:"220px"},on:{change:function(e){return t.changeStaff()}},model:{value:t.corpid,callback:function(e){t.corpid=e},expression:"corpid"}},[t._l(t.teamData,function(e){return[i("el-option",{key:e.memo,attrs:{label:e.memo,value:e.id}},[t._v(t._s(e.memo))])]})],2)],1)]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-left"},[t._v("外呼项目")]),t._v(" "),i("span",{staticClass:"item-right"},[i("el-select",{staticStyle:{width:"220px"},on:{change:t.changePrjid},model:{value:t.prjid,callback:function(e){t.prjid=e},expression:"prjid"}},[t._l(t.projData,function(e){return[i("el-option",{key:e.id,attrs:{label:e.pmemo,value:e.id}},[t._v(t._s(e.pmemo))])]})],2)],1)]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-left"},[t._v("数量")]),t._v(" "),i("span",{staticClass:"item-right"},[[i("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"num"}],staticClass:"txt-common",staticStyle:{width:"220px"},attrs:{type:"Number"},domProps:{value:t.num},on:{input:function(e){e.target.composing||(t.num=e.target.value)}}})]],2)]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-left"},[t._v("数据归属地")]),t._v(" "),i("span",{staticClass:"item-right"},[[i("el-input",{staticStyle:{width:"372px"},attrs:{placeholder:"点击选择",readonly:""},nativeOn:{click:function(e){return t.dialog_batch("city")}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})]],2)]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-left"},[t._v("模型")]),t._v(" "),i("span",{staticClass:"item-right"},[i("el-select",{staticStyle:{width:"372px"},attrs:{placeholder:"请选择",filterable:"","filter-method":t.dataFilter},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t._l(t.options,function(t){return i("el-option",{key:t.id,attrs:{label:t.memo,value:t.id}})})],2)],1)])])]),t._v(" "),i("div",{staticClass:"edit-btn-list"},[i("button",{staticClass:"btn-submit",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交")])]),t._v(" "),i("el-dialog",{attrs:{visible:t.popup_show},on:{"update:visible":function(e){t.popup_show=e}}},[i("popup-box",{ref:"getDataName",attrs:{dataList:t.cityId,dataId:t.dataId}}),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.popup_show=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit-title"},[e("h6",[e("span"),this._v("账号基本信息")])])}]};var d=i("VU/8")(c,r,!1,function(t){i("OmeH")},"data-v-ee72cd84",null);e.default=d.exports}});
//# sourceMappingURL=9.1eac3caaf8e9c8464b05.js.map